(this["webpackJsonpbuildspace-solana"]=this["webpackJsonpbuildspace-solana"]||[]).push([[0],{104:function(e){e.exports=JSON.parse('{"_keypair":{"publicKey":{"0":226,"1":47,"2":133,"3":225,"4":80,"5":231,"6":243,"7":223,"8":78,"9":88,"10":72,"11":251,"12":201,"13":139,"14":44,"15":225,"16":121,"17":39,"18":101,"19":242,"20":185,"21":61,"22":186,"23":33,"24":16,"25":106,"26":81,"27":44,"28":151,"29":206,"30":53,"31":90},"secretKey":{"0":199,"1":55,"2":162,"3":235,"4":216,"5":198,"6":203,"7":238,"8":50,"9":229,"10":126,"11":143,"12":229,"13":90,"14":11,"15":47,"16":64,"17":67,"18":188,"19":39,"20":44,"21":118,"22":229,"23":85,"24":115,"25":67,"26":165,"27":107,"28":141,"29":110,"30":151,"31":121,"32":226,"33":47,"34":133,"35":225,"36":80,"37":231,"38":243,"39":223,"40":78,"41":88,"42":72,"43":251,"44":201,"45":139,"46":44,"47":225,"48":121,"49":39,"50":101,"51":242,"52":185,"53":61,"54":186,"55":33,"56":16,"57":106,"58":81,"59":44,"60":151,"61":206,"62":53,"63":90}}}')},110:function(e,t,n){},111:function(e,t){},112:function(e,t){},143:function(e,t){},144:function(e,t){},167:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var r=n(22),c=n.n(r),a=n(100),s=n.n(a),o=(n(110),n(1)),i=n.n(o),u=n(3),l=n(9),p=n(33),f=n(8),b=(n(167),n.p+"static/media/twitter-logo.d89d9a86.svg"),d=n(80),m=n(104),g=n(13),j=p.e.SystemProgram,x=p.e.Keypair,h=Object.values(m._keypair.secretKey),v=new Uint8Array(h),y=x.fromSecretKey(v),O=new f.PublicKey(d.metadata.address),w=Object(f.clusterApiUrl)("devnet"),k="processed",S="_buildspace",K="https://twitter.com/".concat(S),N=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(l.a)(a,2),o=s[0],m=s[1],x=Object(r.useState)(null),h=Object(l.a)(x,2),v=h[0],N=h[1],A=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,!(n=t.solana)){e.next=11;break}return n.isPhantom&&console.log("Phantom wallet found!"),e.next=6,n.connect({onlyIfTrusted:!0});case 6:r=e.sent,console.log("Connected with Public Key:",r.publicKey.toString()),c(r.publicKey.toString()),e.next=12;break;case 11:alert("Solana object not found! Get a Phantom Wallet \ud83d\udc7b");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window,!(n=t.solana)){e.next=7;break}return e.next=4,n.connect();case 4:r=e.sent,console.log("Connected with Public Key:",r.publicKey.toString()),c(r.publicKey.toString());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e){var t=e.target.value;m(t)},E=function(){var e=new f.Connection(w,k);return new p.c(e,window.solana,k)},I=function(e){return new p.b(d,O,e)},P=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=E(),n=I(t),console.log("ping"),e.next=6,n.rpc.startStuffOff({accounts:{baseAccount:y.publicKey,user:t.wallet.publicKey,systemProgram:j.programId},signers:[y]});case 6:return console.log("Created a new BaseAccount w/ address:",y.publicKey.toString()),e.next=9,F();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error creating BaseAccount account:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=E(),n=I(t),e.next=5,n.account.baseAccount.fetch(y.publicKey);case 5:r=e.sent,console.log("Got the account",r),N(r.gifList),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error in getGitList: ",e.t0),N(null);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==o.length){e.next=3;break}return console.log("No gif link gieven!"),e.abrupt("return");case 3:return console.log("Gif link:",o),e.prev=4,t=E(),n=I(t),e.next=9,n.rpc.addGif(o,{accounts:{baseAccount:y.publicKey,user:t.wallet.publicKey}});case 9:return console.log("GIF successfully sent to program",o),e.next=12,F();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log("Error sending GIF:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=E(),r=I(n),c=new p.a(t),e.next=6,r.rpc.upvoteGif(c,{accounts:{baseAccount:y.publicKey,user:n.wallet.publicKey}});case 6:return console.log("Voted tallied!"),e.next=9,F();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error upvoting GIF (index=".concat(t,"):"),e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),B=Object(r.useCallback)(F,[]);return Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("load",e),function(){return window.removeEventListener("load",e)}}),[]),Object(r.useEffect)((function(){n&&(console.log("Fetching GIF list..."),B())}),[n,B]),Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)("div",{className:n?"authed-container":"container",children:[Object(g.jsxs)("div",{className:"header-container",children:[Object(g.jsx)("p",{className:"header",children:"\ud83d\udcd6 Emoji Cookbook"}),Object(g.jsx)("p",{className:"sub-text",children:"Share recipes for your favourite emoji mixups \u2728"}),!n&&Object(g.jsx)("button",{className:"cta-button connect-wallet-button",onClick:G,children:"Connect to Wallet"}),n&&(null===v?Object(g.jsx)("div",{className:"connected-container",children:Object(g.jsx)("button",{className:"cta-button submit-gif-button",onClick:P,children:"Do One-Time Initialization For GIF Program Account"})}):Object(g.jsxs)("div",{className:"connected-container",children:[Object(g.jsxs)("form",{onSubmit:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,L();case 3:m("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(g.jsx)("input",{type:"text",placeholder:"Enter gif link!",value:o,onChange:C}),Object(g.jsx)("button",{type:"submit",className:"cta-button submit-gif-button",children:"Submit"})]}),Object(g.jsx)("div",{className:"gif-grid",children:v.map((function(e,t){return Object(g.jsxs)("figure",{className:"gif-item",children:[Object(g.jsx)("img",{src:e.gifLink,alt:"From ".concat(e.userAddress.toString())}),Object(g.jsxs)("figcaption",{className:"gif-caption",children:["From ",e.userAddress.toString(),Object(g.jsx)("br",{}),"votes = ",e.voteCount.toString()," \ud83d\udc96"," ",Object(g.jsx)("button",{onClick:function(){return M(t)},children:"VOTE UP!"})]})]},t)}))})]})),Object(g.jsxs)("p",{className:"sub-text",children:["Inspired by ",Object(g.jsx)("a",{href:"https://tikolu.net/emojimix/",children:"emojimix"})]})]}),Object(g.jsxs)("div",{className:"footer-container",children:[Object(g.jsx)("img",{alt:"Twitter Logo",className:"twitter-logo",src:b}),Object(g.jsx)("a",{className:"footer-text",href:K,target:"_blank",rel:"noreferrer",children:"built on @".concat(S)})]})]})})};s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(N,{})}),document.getElementById("root"))},80:function(e){e.exports=JSON.parse('{"version":"0.0.0","name":"myepicproject","instructions":[{"name":"startStuffOff","accounts":[{"name":"baseAccount","isMut":true,"isSigner":true},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"addGif","accounts":[{"name":"baseAccount","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":true}],"args":[{"name":"gifLink","type":"string"}]},{"name":"upvoteGif","accounts":[{"name":"baseAccount","isMut":true,"isSigner":false}],"args":[{"name":"gifIndex","type":"u64"}]},{"name":"clearGifs","accounts":[{"name":"baseAccount","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":true}],"args":[]}],"accounts":[{"name":"BaseAccount","type":{"kind":"struct","fields":[{"name":"totalGifs","type":"u64"},{"name":"gifList","type":{"vec":{"defined":"ItemStruct"}}}]}}],"types":[{"name":"ItemStruct","type":{"kind":"struct","fields":[{"name":"gifLink","type":"string"},{"name":"userAddress","type":"publicKey"},{"name":"voteCount","type":"u64"}]}}],"metadata":{"address":"HCntEBgsHkBFQoLX8TUGjrY6dk7YDDa5ptSadb3c1doN"}}')}},[[169,1,2]]]);
//# sourceMappingURL=main.7558ee69.chunk.js.map